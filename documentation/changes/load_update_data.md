---
layout: default
title: Docs | Change 'loadUpdateData'
---

<!-- ====================================================== -->
<!-- GENERATED BY ChangeDocGenerator DO NOT MODIFY MANUALLY -->
<!-- ====================================================== -->

  <script>
  $(function() {
    $( "#changelog-tabs" ).tabs();
  });
</script>

# Change: 'loadUpdateData'

Loads or updates data from a CSV file into an existing table. Differs from loadData by issuing a SQL batch that checks for the existence of a record. If found, the record is UPDATEd, else the record is INSERTed. Also, generates DELETE statements for a rollback.

A value of NULL in a cell will be converted to a database NULL rather than the string 'NULL'

## Available Attributes ##

<table class='attribs'>
<tr><th>Name</th><th>Description</th></tr>
<tr><td class="name">catalogName</td><td class="desc">Name of the catalog<span class="right"><span class="since">@ v3.0</span><span class="sample">E.g. <span class="val">&#x27;cat&#x27;</span></span></span></td></tr>
<tr><td class="name">commentLineStartsWith</td><td class="desc">Lines starting with this character are treated as comment and ignored.<span class="right"><span class="default">Default: <span class="val">&#x27;#&#x27;</span></span></span></td></tr>
<tr><td class="name">encoding</td><td class="desc">Encoding of the CSV file (defaults to UTF-8)<span class="right"><span class="default">Default: <span class="val">&#x27;utf-8&#x27;</span></span></span></td></tr>
<tr><td class="name" required>file</td><td class="desc">CSV file to load<span class="right"><span class="sample">E.g. <span class="val">&#x27;com/example/users.csv&#x27;</span></span></span></td></tr>
<tr><td class="name">onlyUpdate</td><td class="desc"><span class="type">boolean</span>If true, records with no matching database record should be ignored<span class="right"><span class="since">@ v3.3</span></span></td></tr>
<tr><td class="name" required>primaryKey</td><td class="desc">Comma delimited list of the columns for the primary key<span class="right"><span class="sample">E.g. <span class="val">&#x27;pk_id&#x27;</span></span></span></td></tr>
<tr><td class="name">quotchar</td><td class="desc">The quote character for string fields containing the separator character.<span class="right"><span class="default">Default: <span class="val">&#x27;&quot;&#x27;</span></span></span></td></tr>
<tr><td class="name">relativeToChangelogFile</td><td class="desc"><span class="type">boolean</span>Whether the file path is relative to the root changelog file rather than to the classpath.<span class="right"></span></td></tr>
<tr><td class="name">schemaName</td><td class="desc">Name of the schema<span class="right"><span class="sample">E.g. <span class="val">&#x27;public&#x27;</span></span></span></td></tr>
<tr><td class="name">separator</td><td class="desc">Character separating the fields.<span class="right"><span class="default">Default: <span class="val">&#x27;,&#x27;</span></span></span></td></tr>
<tr><td class="name" required>tableName</td><td class="desc">Name of the table to insert or update data in<span class="right"><span class="sample">E.g. <span class="val">&#x27;person&#x27;</span></span></span></td></tr>
<tr><td class="name">usePreparedStatements</td><td class="desc"><span class="type">boolean</span>Use prepared statements instead of insert statement strings if the DB supports it<span class="right"></span></td></tr>
</table>

## Nested Properties ##

<table id="nestedProps" class="attribs">
<tr><th>Name</th><th>Description</th></tr><tr><td class="name">columns&nbsp;/ <span class="right">column&nbsp;<sup>[0..N]</sup></span></td><td class="desc">CSV -> table column mapping can be defined.

Either the 'header' or 'index' attribute needs to be defined for columns if the header name in the CSV is different than the column needs to be inserted
If no `column` defined at all, header names has to match the column names in the table.The column type it is taken from the DB. Otherwise for non-string columns the type definition might be required<span class="right"><b>Note:</b> <i>columns</i> tag not required in XML</span><div class="header">Attributes</div><table id="nestedAttrs">{%include LoadDataColumnConfig.md%}</table></td></tr>
</table><div id='changelog-tabs'>
<ul>
    <li><a href="#tab-xml">XML Sample</a></li>
    <li><a href="#tab-yaml">YAML Sample</a></li>
    <li><a href="#tab-json">JSON Sample</a></li>
  </ul>
<div id='tab-xml'>
{% highlight xml %}
<changeSet author="liquibase-docs" id="loadUpdateData-example">
    <loadUpdateData catalogName="cat"
            commentLineStartsWith="/"
            encoding="UTF-8"
            file="com/example/users.csv"
            onlyUpdate="true"
            primaryKey="pk_id"
            quotchar="'"
            relativeToChangelogFile="true"
            schemaName="public"
            separator=";"
            tableName="person"
            usePreparedStatements="true">
        <column header="header1"
                name="id"
                type="NUMERIC"/>
        <column index="3"
                name="name"
                type="BOOLEAN"/>
    </loadUpdateData>
</changeSet>
{% endhighlight %}
</div>
<div id='tab-yaml'>
{% highlight yaml %}
changeSet:
  id: loadUpdateData-example
  author: liquibase-docs
  changes:
  - loadUpdateData:
      catalogName: cat
      columns:
      - column:
          header: header1
          name: id
          type: NUMERIC
      - column:
          index: 3
          name: name
          type: BOOLEAN
      commentLineStartsWith: /
      encoding: UTF-8
      file: com/example/users.csv
      onlyUpdate: true
      primaryKey: pk_id
      quotchar: ''''
      relativeToChangelogFile: true
      schemaName: public
      separator: ;
      tableName: person
      usePreparedStatements: true

{% endhighlight %}
</div>
<div id='tab-json'>
{% highlight json %}
{
  "changeSet": {
    "id": "loadUpdateData-example",
    "author": "liquibase-docs",
    "changes": [
      {
        "loadUpdateData": {
          "catalogName": "cat",
          "columns": [
            {
              "column": {
                "header": "header1",
                "name": "id",
                "type": "NUMERIC"
              }
            },
            {
              "column": {
                "index": 3,
                "name": "name",
                "type": "BOOLEAN"
              }
            }]
          ,
          "commentLineStartsWith": "/",
          "encoding": "UTF-8",
          "file": "com/example/users.csv",
          "onlyUpdate": true,
          "primaryKey": "pk_id",
          "quotchar": "'",
          "relativeToChangelogFile": true,
          "schemaName": "public",
          "separator": ";",
          "tableName": "person",
          "usePreparedStatements": true
        }
      }]
    
  }
}

{% endhighlight %}
</div>
</div>


## Database Support

<table style='border:1;'>
<tr><th>Database</th><th>Notes</th><th>Auto Rollback</th></tr>
<tr><td>DB2/LUW</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>DB2/z</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>Derby</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>Firebird</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>H2</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>HyperSQL</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>INGRES</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>Informix</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>MariaDB</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>MySQL</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>Oracle</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>PostgreSQL</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>SQL Server</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>SQLite</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>Sybase</td><td><b>Supported</b></td><td>No</td></tr>
<tr><td>Sybase Anywhere</td><td><b>Supported</b></td><td>No</td></tr>
</table>
